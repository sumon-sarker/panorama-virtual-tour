(function(){var h=void 0,k=!0,l=null,m=!1;function o(){return function(){}}
(function(){ktools={i:function(){var a="en",d="",b=[],g=new ktools.k;this.setLanguage=this.Sa=function(c){a=c};this.getLanguage=this.ha=function(){return a};this.getAvailableLanguages=this.ca=function(){return b};this.setLanguageFilePath=this.L=function(c,b){d=(c?c:"")+a+(b?b:"")};this.initLanguage=this.sa=function(c,b,f){a=c;b&&this.L(b,f);for(var c=ktools.q.H(d),b=c.getElementsByTagName("data").length,f=h,j=0;j<b;j++)f=c.getElementsByTagName("data")[j].textContent!=h?c.getElementsByTagName("data")[j].textContent:
h,f==h&&c.getElementsByTagName("data")[j].innerText&&(f=c.getElementsByTagName("data")[j].innerText),f==h&&c.getElementsByTagName("data")[j].innerHTML&&(f=c.getElementsByTagName("data")[j].innerHTML),f==h&&c.getElementsByTagName("data")[j].text&&(f=c.getElementsByTagName("data")[j].text),f==h&&c.getElementsByTagName("data")[j].firstChild&&(f=c.getElementsByTagName("data")[j].firstChild.data),g.add(c.getElementsByTagName("data")[j].getAttribute("name"),f)};this.getMessage=this.ia=function(c){return g.item(a+
"_"+c)}}};ktools.I18N=ktools.i;ktools.i.a=l;ktools.I18N.instance=ktools.i.a;ktools.i.d=function(){this.a==l&&(this.a=new ktools.i);return this.a};ktools.I18N.getInstance=ktools.i.d;ktools.q=o();ktools.XML=ktools.q;ktools.q.H=function(a){var d=l,b=l,g=m;try{d=new XMLHttpRequest,d.open("GET",a,m)}catch(c){if("undefined"!=typeof window.ActiveXObject){b=new ActiveXObject("Microsoft.XMLDOM");for(b.async=m;4!=b.readyState;);b.load(a);g=k;return b}b=document.implementation.createDocument("","",l);b.onload=
function(){return b};b.load(a);g=k}if(!g)return d.send(""),b=d.responseXML,g=k,b};ktools.XML.importXML=ktools.q.H;ktools.w=o();ktools.Device=ktools.w;ktools.w.Ea=function(){return"ontouchstart"in window||"ontouchstart"in document.documentElement||window.Ya&&document instanceof DocumentTouch};ktools.Device.isTouch=ktools.w.Ea;ktools.e=o();ktools.DOM=ktools.e;ktools.e.ja=function(a){for(var d=y=0;a&&!isNaN(a.offsetLeft)&&!isNaN(a.offsetTop);)d+=a.offsetLeft-a.scrollLeft,y+=a.offsetTop-a.scrollTop,a=
a.offsetParent;return{x:d,y:y}};ktools.DOM.getOffset=ktools.e.ja;ktools.e.preventDefault=function(a){e=a?a:window.event;e.preventDefault?e.preventDefault():e.returnValue=m};ktools.DOM.preventDefault=ktools.e.preventDefault;ktools.e.Ua=function(a){e=a?a:window.event;e.stopPropagation?e.stopPropagation():e.cancelBubble=k};ktools.DOM.stopEventPropagation=ktools.e.Ua;ktools.g=o();ktools.String=ktools.g;ktools.g.Ta=function(a,d){return a.match("^"+d)==d};ktools.String.startsWith=ktools.g.Ta;ktools.g.X=
function(a){var d=a,d=jQuery("<div/>").html(a).text();return unescape(d)};ktools.String.decode=ktools.g.X;ktools.g.Va=function(a){var d=document.createElement("div");d.innerHTML=a;var b,a=d.getElementsByTagName("script");for(b=a.length;b--;)a[b].parentNode.removeChild(a[b]);a=d.getElementsByTagName("style");for(b=a.length;b--;)a[b].parentNode.removeChild(a[b]);a=d.getElementsByTagName("iframe");for(b=a.length;b--;)a[b].parentNode.removeChild(a[b]);a=d.getElementsByTagName("audio");for(b=a.length;b--;)a[b].parentNode.removeChild(a[b]);
a=d.getElementsByTagName("canvas");for(b=a.length;b--;)a[b].parentNode.removeChild(a[b]);a=d.getElementsByTagName("embed");for(b=a.length;b--;)a[b].parentNode.removeChild(a[b]);a=d.getElementsByTagName("form");for(b=a.length;b--;)a[b].parentNode.removeChild(a[b]);a=d.getElementsByTagName("object");for(b=a.length;b--;)a[b].parentNode.removeChild(a[b]);a=d.getElementsByTagName("video");for(b=a.length;b--;)a[b].parentNode.removeChild(a[b]);return d.innerHTML};ktools.String.stripTags=ktools.g.Va;ktools.v=
o();ktools.Code=ktools.v;ktools.v.eval=function(a){a=a.replace(/(\r\n|\n|\r|\t)/gm,"");eval(a)};ktools.Code.eval=ktools.v.eval;ktools.z=o();ktools.Url=ktools.z;ktools.z.ka=function(a,d){var d=d.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]"),b=RegExp("[\\?&]"+d+"=([^&#]*)").exec(a);return b==l?"":b[1]};ktools.Url.getParam=ktools.z.ka;ktools.n=o();ktools.Color=ktools.n;ktools.n.qa=function(a,d){var b=/^#?[0-9a-f]{3,6}$/i.test(a);return"undefined"!=typeof a&&(7==a.length||4==a.length)&&b?a.toUpperCase():
"undefined"!=typeof a&&(6==a.length||3==a.length)&&b?"#"+a.toUpperCase():"undefined"!=typeof d?d:"#FFFFFF"};ktools.Color.htmlColor=ktools.n.qa;ktools.n.pa=function(a){var d=[];d[0]=parseInt(a.substr(0,2),16);d[1]=parseInt(a.substr(2,2),16);d[2]=parseInt(a.substr(4,2),16);return d};ktools.Color.hex2rgb=ktools.n.pa;ktools.O=function(){function a(a){var b=a.indexOf(this.u);return-1==b?h:parseFloat(a.substring(b+this.u.length+1))}function d(a){for(var b=0,d=a.length;b<d;b++){var j=a[b].string,q=a[b].prop;
this.u=a[b].versionSearch||a[b].identity;if(j){if(-1!=j.indexOf(a[b].subString))return a[b].identity}else if(q)return a[b].identity}}this.versionSearchString=this.u=this.version=this.version=this.OS=this.f=this.browser=this.browser="";var b=[{string:navigator.userAgent,subString:"Chrome",identity:"Chrome"},{string:navigator.userAgent,subString:"OmniWeb",versionSearch:"OmniWeb/",identity:"OmniWeb"},{string:navigator.vendor,subString:"Apple",identity:"Safari",versionSearch:"Version"},{prop:window.opera,
identity:"Opera",versionSearch:"Version"},{string:navigator.vendor,subString:"iCab",identity:"iCab"},{string:navigator.vendor,subString:"KDE",identity:"Konqueror"},{string:navigator.userAgent,subString:"Firefox",identity:"Firefox"},{string:navigator.vendor,subString:"Camino",identity:"Camino"},{string:navigator.userAgent,subString:"Netscape",identity:"Netscape"},{string:navigator.userAgent,subString:"MSIE",identity:"Explorer",versionSearch:"MSIE"},{string:navigator.userAgent,subString:"Trident",identity:"Explorer",
versionSearch:"MSIE"},{string:navigator.userAgent,subString:"Gecko",identity:"Mozilla",versionSearch:"rv"},{string:navigator.userAgent,subString:"Mozilla",identity:"Netscape",versionSearch:"Mozilla"}],g=[{string:navigator.platform,subString:"Win",identity:"Windows"},{string:navigator.platform,subString:"Mac",identity:"Mac"},{string:navigator.userAgent,subString:"iPhone",identity:"iPhone/iPod"},{string:navigator.userAgent,subString:"iPad",identity:"iPad"},{string:navigator.platform,subString:"Linux",
identity:"Linux"}];this.isIE=this.C=function(){return"Explorer"==this.browser};this.isVista=this.Fa=function(){return-1!=navigator.userAgent.indexOf("Windows NT 6.0")};this.isXP=this.La=function(){return-1!=navigator.userAgent.indexOf("Windows NT 5")};this.isWindows7=this.Ja=function(){return-1!=navigator.userAgent.indexOf("Windows NT 6.1")};this.isWindows8=this.Ka=function(){return-1!=navigator.userAgent.indexOf("Windows NT 6.2")};this.isWindows=this.Ia=function(){return"Windows"==this.f};this.isLinux=
this.Aa=function(){return"Linux"==this.f};this.isWP8=this.Ha=function(){return-1!=navigator.userAgent.indexOf("Windows Phone 8")};this.isWP7=this.Ga=function(){return-1!=navigator.userAgent.indexOf("Windows Phone 7")};this.isAndroid=this.ta=function(){return-1!=navigator.userAgent.indexOf("Android")};this.isIE9=this.xa=function(){return this.C()&&9==this.A()};this.isAtLeastIEX=this.ua=function(a){return this.C()&&this.A()>=a};this.isMac=this.Ba=function(){return"Mac"==this.f||this.s()};this.isIOS=
this.s=function(){return"iPhone/iPod"==this.f||"iPad"==this.f};this.isIOSRetina=this.ya=function(){return this.s()&&1<window.devicePixelRatio};this.isMobileSafari=this.Ca=function(){return this.K()&&this.s()};this.isSafari=this.K=function(){return"Safari"==this.browser};this.isChrome=this.va=function(){return"Chrome"==this.browser};this.isFirefox=this.wa=function(){return"Firefox"==this.browser||"Mozilla"==this.browser};this.isOpera=this.Da=function(){return"Opera"==this.browser};this.getInternetExplorerVersion=
this.A=function(){var a=-1;if("Microsoft Internet Explorer"==navigator.appName){var b=navigator.userAgent,d=/MSIE ([0-9]{1,}[.0-9]{0,})/;d.exec(b)!=l&&(a=parseFloat(RegExp.$1))}else"Netscape"==navigator.appName&&(b=navigator.userAgent,d=/Trident\/.*rv:([0-9]{1,}[.0-9]{0,})/,d.exec(b)!=l&&(a=parseFloat(RegExp.$1)));return a};this.init=this.ra=function(){this.browser=d(b)||"An unknown browser";this.version=a(navigator.userAgent)||a(navigator.appVersion)||"An unknown version";this.f=d(g)||"An unknown OS"}};
ktools.BrowserDetect=ktools.O;ktools.Q=function(a){var d=["webkit","moz","ms","o","khtml"],b=a||document.documentElement,g=m,c="",i="",f={enter:l,exit:l,change:l,resize:l},j=m;this.getExternal=this.b=function(){return f};this.setExternal=this.Ra=function(a){f=a};this.isFullscreen=this.B=function(){return""===c?document.fullscreen?document.fullscreen:document.fullScreen:"webkit"==c?document[c+"IsFullscreen"]?document[c+"IsFullscreen"]:document[c+"IsFullScreen"]:document[c+"Fullscreen"]?document[c+
"Fullscreen"]:document[c+"FullScreen"]};this.getFullscreenElement=this.o=function(){if(g){var a=document;return""===c?a.aa?a.aa:a.$a:a[c+"FullscreenElement"]?a[c+"FullscreenElement"]:a[c+"FullScreenElement"]}return l};this.getFullscreenEnabled=this.ga=function(){if(g)return k;var a=document;if(""===c)return a.ba?a.ba:a.ab;if("webkit"==c){if(kolorBrowserDetect&&"Safari"==kolorBrowserDetect.browser&&7>kolorBrowserDetect.version)return m;if(a[c+"RequestFullscreen"])return a[c+"RequestFullscreen"];console.log(a[c+
"RequestFullScreen"]);return a[c+"RequestFullScreen"]}return a[c+"FullscreenEnabled"]?a[c+"FullscreenEnabled"]:a[c+"FullScreenEnabled"]};this.supportsFullscreen=this.Wa=function(){debug&&console.log("ktools.Fullscreen.supportsFullscreen");i="";if("undefined"!=typeof document.exitFullscreen||"undefined"!=typeof document.exitFullScreen||"undefined"!=typeof document.cancelFullscreen||"undefined"!=typeof document.cancelFullScreen)g=k,i+="fullscreenchange";else for(var a=0,f=d.length;a<f;a++){c=d[a];if("undefined"!=
typeof document[c+"CancelFullScreen"]||"undefined"!=typeof document[c+"CancelFullscreen"]||"undefined"!=typeof document[c+"ExitFullscreen"]||"undefined"!=typeof document[c+"ExitFullScreen"]){if("webkit"==c&&kolorBrowserDetect&&"Safari"==kolorBrowserDetect.browser&&7>kolorBrowserDetect.version){g=m;break}g=k;i="ms"==c?i+"MSFullscreenChange":i+c+"fullscreenchange";break}if("webkit"==c){var p=b;if(p.webkitSupportsFullscreen){g=p.webkitSupportsFullscreen;break}}}a="#"+b.id+":fullscreen { height: 100% !important; width: 100% !important; max-height: 100% !important; background-color: black; }";
a+="#"+b.id+":fullscreen::backdrop { background-color: black; }";a+="#"+b.id+":full-screen { height: 100% !important; width: 100% !important; max-height: 100% !important; background-color: black; }";""!=c&&b.id&&("ms"==c?(a+="#"+b.id+":-"+c+"-fullscreen { height: 100% !important; width: 100% !important; max-height: 100% !important; background-color: black; }",a+="#"+b.id+":-"+c+"-fullscreen::-"+c+"-backdrop { background-color: black; }"):a+="#"+b.id+":-"+c+"-full-screen { height: 100% !important; width: 100% !important; max-height: 100% !important; background-color: black; }");
f=document.createElement("style");f.type="text/css";f.styleSheet?f.styleSheet.cssText=a:f.appendChild(document.createTextNode(a));document.getElementsByTagName("head")[0].appendChild(f);var n=this;document.addEventListener?document.addEventListener(i,function(){j=n.o()!=l?k:m;if(n.b().change&&n.b().resize){n.b().change(j);n.b().resize()}}):i&&document.attachEvent(i,function(){j=n.o()!=l?k:m;if(n.b().change&&n.b().resize){n.b().change(j);n.b().resize()}});return g};this.request=this.Oa=function(){debug&&
console.log("ktools.Fullscreen.request");if(g){if(!this.B()||!this.o())if(""===c)b.Pa?b.Pa():b.bb();else if(b[c+"RequestFullscreen"])if("webkit"==c)b[c+"RequestFullscreen"](Element.N);else b[c+"RequestFullscreen"]();else if("webkit"==c)b[c+"RequestFullScreen"](Element.N);else b[c+"RequestFullScreen"]()}else this.b().enter&&this.b().enter()};this.exit=this.Y=function(){debug&&console.log("ktools.Fullscreen.exit");if(g){if(this.B()||this.o()){var a=document;if(""===c)a.$?a.$():a.Z?a.Z():a.W?a.W():a.Za();
else if(a[c+"ExitFullscreen"])a[c+"ExitFullscreen"]();else if(a[c+"ExitFullScreen"])a[c+"ExitFullScreen"]();else if(a[c+"CancelFullscreen"])a[c+"CancelFullscreen"]();else a[c+"CancelFullScreen"]()}}else this.b().exit&&this.b().exit()}};ktools.Fullscreen=ktools.Q;ktools.m=function(){var a=[];this.add=this.add=function(d){a.push(d)};this.remove=this.remove=function(d){for(var b=0;b<a.length;b++)a[b]==d&&a.splice(b,1)};this.get=this.get=function(d){return a[d]};this.toArray=this.toArray=function(){return a};
this.size=this.size=function(){return a.length}};ktools.Collection=ktools.m;ktools.k=function(){this.count=this.count=0;this.map=this.map={};this.add=this.add=function(a,d){if("undefined"!=typeof a){if(this.map[a]!=h)return this.count;this.map[a]=d;return++this.count}};this.update=this.update=function(a,d){if("undefined"!=typeof a)return this.map[a]=d,this.count};this.remove=this.remove=function(a){if(this.map[a]!=h)return delete this.map[a],--this.count};this.item=this.item=function(a){return this.map[a]};
this.keys=this.keys=function(){var a=new ktools.m,d;for(d in this.map)a.add(d);return a.toArray()};this.values=this.Xa=function(){var a=new ktools.m,d;for(d in this.map)a.add(this.map[d]);return a.toArray()}};ktools.Map=ktools.k;ktools.c=function(){if(ktools.c.caller!=ktools.c.d)throw Error("This object cannot be instanciated, use getInstance.");var a=new ktools.k,d=new ktools.k;this.loadScript=this.h=function(b,d,c){if("undefined"==typeof a.item(b)){a.add(b,d);var i=document.createElement("script");
i.type="text/javascript";i.readyState?i.onreadystatechange=function(){if("loaded"==i.readyState||"complete"==i.readyState)i.onreadystatechange=l,c&&c()}:i.onload=function(){c&&c()};i.src=d;document.getElementsByTagName("head")[0].appendChild(i);debug&&console.log("DynamicLoader : loadScript "+b)}else debug&&console.log("DynamicLoader : "+b+" already loading/loaded"),c&&c()};this.loadCss=this.p=function(a,g){debug&&console.log("preparing css "+a);if("undefined"==typeof d.item(a)){d.add(a,g);var c=
document.createElement("link");c.type="text/css";c.rel="stylesheet";c.href=g;c.media="screen";c.title="dynamicLoadedSheet";document.getElementsByTagName("head")[0].appendChild(c);debug&&console.log("css "+a+" added")}else debug&&console.log("css "+a+" already added")}};ktools.DynamicLoader=ktools.c;ktools.c.a=l;ktools.DynamicLoader.instance=ktools.c.a;ktools.c.d=function(){this.a==l&&(this.a=new ktools.c);return this.a};ktools.DynamicLoader.getInstance=ktools.c.d;ktools.S=function(a,d,b,g){var c=
this,i=g,f=m,j=new ktools.k;this.getName=this.getName=function(){return a};this.getUrl=this.l=function(){return d};this.getDependances=this.ea=function(){return b};this.isLoaded=this.D=function(){return f};this.setLoaded=this.M=function(a){f=a};this.isPrimaryNode=this.J=function(){"undefined"==typeof i&&(i=m);return i};this.getParentsToCall=this.G=function(){return j};this.addParentToCall=this.F=function(a){"undefined"!=typeof a&&a!=l&&j.add(a.getName(),a)};this.loadScript=this.h=function(a){c.F(a);
if(c.D())return c.r();if(0==b.length)ktools.c.d().h(c.getName(),c.l(),c.r);else for(a=0;a<b.length;a++)b[a].h(c)};this.callback=this.r=function(){debug&&console.log("script info : "+c.getName()+" loaded !");c.M(k);for(var a=c.G(),b=l,d=a.keys(),f=0;f<a.count;f++)b=a.item(d[f]),ktools.c.d().h(b.getName(),b.l(),b.r)}};ktools.Script=ktools.S;ktools.P=function(a,d){var b=this;this.getName=this.getName=function(){return a};this.getUrl=this.l=function(){return d};this.loadCss=this.p=function(){ktools.c.d().p(b.getName(),
b.l())}};ktools.CssStyle=ktools.P;ktools.R=function(a){var d=new ktools.m,b=new ktools.m,g=l,c=m,i=l;this.getPluginName=this.ma=function(){return a};this.addScript=this.V=function(a){d.add(a)};this.getScripts=this.oa=function(){return d};this.addCss=this.T=function(a){b.add(a)};this.getCss=this.da=function(){return b};this.setEditorScript=this.Qa=function(a){g=a};this.getEditorScript=this.fa=function(){return g};this.register=this.Ma=function(a){i=a;return this};this.getRegistered=this.na=function(){return i};
this.isInitialized=this.za=function(){for(var a=0;a<d.size();a++)c|=d.get(a).D();return c};this.initialize=this.I=function(){for(var a=l,c=0;c<b.size();c++)a=b.get(c),a.p();a=l;for(c=0;c<d.size();c++)a=d.get(c),a.J()&&a.h()}};ktools.KolorPlugin=ktools.R;ktools.j=function(){this.pluginList=this.t=new ktools.k;this.addPlugin=this.U=function(a,d,b){this.t.add(a,d);("undefined"==typeof b||b)&&d.I()};this.removePlugin=this.Na=function(a){this.t.remove(a)};this.getPlugin=this.la=function(a){return this.t.item(a)}};
ktools.KolorPluginList=ktools.j;ktools.j.a=l;ktools.KolorPluginList.instance=ktools.j.a;ktools.j.d=function(){this.a==l&&(this.a=new ktools.j);return this.a};ktools.KolorPluginList.getInstance=ktools.j.d})();})();